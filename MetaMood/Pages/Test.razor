@page "/test"

<h3>Test</h3>
<button @onclick="func">CLICK ME!</button>
<p>@test</p>


@code {
    private readonly string result = "{ \"audio_features\" : [ { \"danceability\" : 0.473, \"energy\" : 0.449, \"key\" : 4, \"loudness\" : -13.432, \"mode\" : 1, \"speechiness\" : 0.0303, \"acousticness\" : 0.468, \"instrumentalness\" : 0, \"liveness\" : 0.0947, \"valence\" : 0.826, \"tempo\" : 150.607, \"type\" : \"audio_features\", \"id\" : \"5MUsiIncUIN6VY5vusxz87\", \"uri\" : \"spotify:track:5MUsiIncUIN6VY5vusxz87\", \"track_href\" : \"https://api.spotify.com/v1/tracks/5MUsiIncUIN6VY5vusxz87\", \"analysis_url\" : \"https://api.spotify.com/v1/audio-analysis/5MUsiIncUIN6VY5vusxz87\", \"duration_ms\" : 236907, \"time_signature\" : 3 }, { \"danceability\" : 0.262, \"energy\" : 0.0167, \"key\" : 1, \"loudness\" : -29.460, \"mode\" : 0, \"speechiness\" : 0.0533, \"acousticness\" : 0.994, \"instrumentalness\" : 0.908, \"liveness\" : 0.143, \"valence\" : 0.114, \"tempo\" : 79.842, \"type\" : \"audio_features\", \"id\" : \"1LNqr2FALBNFX1smNJcKD2\", \"uri\" : \"spotify:track:1LNqr2FALBNFX1smNJcKD2\", \"track_href\" : \"https://api.spotify.com/v1/tracks/1LNqr2FALBNFX1smNJcKD2\", \"analysis_url\" : \"https://api.spotify.com/v1/audio-analysis/1LNqr2FALBNFX1smNJcKD2\", \"duration_ms\" : 314305, \"time_signature\" : 3 }, { \"danceability\" : 0.874, \"energy\" : 0.652, \"key\" : 9, \"loudness\" : -8.915, \"mode\" : 0, \"speechiness\" : 0.114, \"acousticness\" : 0.150, \"instrumentalness\" : 0.00000634, \"liveness\" : 0.106, \"valence\" : 0.503, \"tempo\" : 102.963, \"type\" : \"audio_features\", \"id\" : \"7rYCenkV4OXJgiUuKrhDCb\", \"uri\" : \"spotify:track:7rYCenkV4OXJgiUuKrhDCb\", \"track_href\" : \"https://api.spotify.com/v1/tracks/7rYCenkV4OXJgiUuKrhDCb\", \"analysis_url\" : \"https://api.spotify.com/v1/audio-analysis/7rYCenkV4OXJgiUuKrhDCb\", \"duration_ms\" : 144588, \"time_signature\" : 4 } ] }";
    public string? test { get; set; }

    public void func()
    {

        var tracks = JObject.Parse(result)?.SelectToken("audio_features")?.ToObject<List<SpotifyTrackDTO>>();

        if (tracks is not null)
            foreach (var t in tracks)
            {
                test += t.Acousticness + ", ";
            }

    }

}
